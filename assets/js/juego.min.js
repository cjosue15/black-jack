(()=>{"use strict";const e=document.querySelector("#btnNuevo"),t=document.querySelector("#btnPedir"),a=document.querySelector("#btnDetener"),n=document.querySelectorAll("small"),s=document.querySelectorAll(".divCartas"),o=document.querySelector("#nomberJugador"),l=["C","D","H","S"],i=["A","J","Q","K"];let r=[],c="",d=[];const u=()=>{d=[];for(let e=2;e<=10;e++)for(const t of l)d.push(`${e}${t}`);for(const e of l)for(const t of i)d.push(`${t}${e}`);return _.shuffle(d)},f=()=>{if(0!==d.length)return d.pop()},w=async(e,t,a)=>(r[t]+=await(async(e,t)=>{let a=e.substring(0,e.length-1);if(isNaN(a))if("A"===a)if(t)do{const{value:e}=await Swal.fire({title:"Ingrese el valor de A puede ser 1 u 11",icon:"info",input:"text",showCloseButton:!1,showCancelButton:!1,allowEscapeKey:!1,allowOutsideClick:!1});a=Number(e)}while(![1,11].includes(a));else a=Math.random()>.5?1:0;else a=10;else a=Number(a);return a})(e,a),n[t].innerHTML=r[t],r[t]),h=(e,t)=>{const a=document.createElement("img");a.classList.add("carta"),a.src=`assets/cartas/${e}.png`,s[t].append(a)},m=async t=>{let a=0;do{const e=f();a=await w(e,r.length-1,!1),h(e,r.length-1)}while(a<t&&t<=21);(()=>{const[e,t]=r;t===e?Swal.fire({icon:"warning",title:"Oops...",text:"Empate"}):e<t&&21>=t?Swal.fire({icon:"error",title:"!Perdiste :(¡",text:"Gano la computadora"}):e>21?Swal.fire({icon:"error",title:"!Perdiste :(¡",text:"Gano la computadora"}):t>21&&Swal.fire({icon:"success",title:"!Win¡",text:`Gano ${c}`})})(),e.classList.add("show")};t.addEventListener("click",async()=>{const e=f(),n=await w(e,0,!0);h(e,0),n>21?(m(n),a.disabled=!0,t.disabled=!0):21===n&&(m(n),a.disabled=!0,t.disabled=!0)}),a.addEventListener("click",()=>{a.disabled=!0,t.disabled=!0,m(r[0])}),e.addEventListener("click",async()=>{let l=0===c.length?await(async()=>{const{value:e}=await Swal.fire({title:"Ingrese su nombre por favor",icon:"info",input:"text",showCloseButton:!1,showCancelButton:!1,inputAttributes:{mainlength:5,autocapitalize:"off",autocorrect:"off"},allowEscapeKey:!1,allowOutsideClick:!1});return await e})():c;l.length>=3&&(c=l,o.innerHTML=c,((o=1)=>{d=u(),r=[];for(let e=0;e<=o;e++)r.push(0);n.forEach(e=>e.innerHTML=0),s.forEach(e=>e.innerHTML=""),a.disabled=!1,t.disabled=!1,btnDetener.classList.remove("hide"),t.classList.remove("hide"),e.classList.remove("show"),e.classList.add("hide")})())})})();